!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.aspnetValidation=t():n.aspnetValidation=t()}(window,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((1&i&&(n=t(n)),8&i)||4&i&&"object"==typeof n&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=0)}([function(n,t,i){"use strict";function e(n,t){var r=t.substr(2),u=n.lastIndexOf("."),f,i;return u>-1&&(f=n.substr(0,u)+"."+r,i=document.getElementsByName(f)[0],i)?i:document.getElementsByName(r)[0]}var u,f,r,o;i.r(t);i.d(t,"MvcValidationProviders",function(){return r});i.d(t,"ValidationService",function(){return o});u=function(n,t,i,r){return new(i||(i=Promise))(function(u,f){function o(n){try{e(r.next(n))}catch(n){f(n)}}function s(n){try{e(r.throw(n))}catch(n){f(n)}}function e(n){n.done?u(n.value):new i(function(t){t(n.value)}).then(o,s)}e((r=r.apply(n,t||[])).next())})};f=function(n,t){function o(e){return function(o){return function(e){if(f)throw new TypeError("Generator is already executing.");for(;r;)try{if(f=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++;u=e[1];e=[0];continue;case 7:e=r.ops.pop();r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1];i=e;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(e);break}i[2]&&r.ops.pop();r.trys.pop();continue}e=t.call(n,r)}catch(n){e=[6,n];u=0}finally{f=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var f,u,i,e,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:o(0),"throw":o(1),"return":o(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e};r=function(){return function(){this.required=function(n){return Boolean(n)};this.stringLength=function(n,t,i){var r,u;return n?i.min&&(r=parseInt(i.min),n.length<r)?!1:i.max&&(u=parseInt(i.max),n.length>u)?!1:!0:!0};this.compare=function(n,t,i){if(!i.other)return!0;var r=e(t.name,i.other);return!r||r.value===n};this.range=function(n,t,i){if(!n)return!0;var r=parseFloat(n);return!isNaN(r)&&!(i.min&&r<parseFloat(i.min))&&!(i.max&&r>parseFloat(i.max))};this.regex=function(n,t,i){return!n||!i.pattern||new RegExp(i.pattern).test(n)};this.email=function(n){return!n||/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*(\.\w{2,})+$/.test(n)};this.creditcard=function(n){if(!n)return!0;if(/[^0-9 \-]+/.test(n))return!1;var t,u,f=0,i=0,r=!1;if((n=n.replace(/\D/g,"")).length<13||n.length>19)return!1;for(t=n.length-1;t>=0;t--)u=n.charAt(t),i=parseInt(u,10),r&&(i*=2)>9&&(i-=9),f+=i,r=!r;return f%10==0};this.url=function(n){return!n||new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i").test(n)};this.phone=function(n){return!n||!/[\+\-\s][\-\s]/g.test(n)&&/^\+?[0-9\-\s]+$/.test(n)};this.remote=function(n,t,i){var s,h,u,v,c;if(!n)return!0;for(var y=i.additionalfields.split(","),r={},f=0,l=y;f<l.length;f++){var a=l[f],u=a.substr(2),o=e(t.name,a);Boolean(o&&o.value)&&(r[u]=o.value)}s=i.url;h=[];for(u in r)v=encodeURIComponent(u)+"="+encodeURIComponent(r[u]),h.push(v);return c=h.join("&"),new Promise(function(n,t){var u=new XMLHttpRequest,e,f;if("Post"===i.type){e=new FormData;for(f in r)e.append(f,r[f]);u.open("post",s);u.setRequestHeader("Content-Type","application/x-www-form-urlencoded");u.send(c)}else u.open("get",s+"?"+c),u.send();u.onload=function(){if(u.status>=200&&u.status<300){var i=JSON.parse(u.responseText);n(i)}else t({status:u.status,statusText:u.statusText,data:u.responseText})};u.onerror=function(){t({status:u.status,statusText:u.statusText,data:u.responseText})}})}}}();o=function(){function n(){this.providers={};this.messageFor={};this.elementUIDs=[];this.elementByUID={};this.formInputs={};this.validators={};this.elementEvents={};this.summary={};this.debounce=300}return n.prototype.addProvider=function(n,t){this.providers[n]||(this.providers[n]=t)},n.prototype.addMvcProviders=function(){var n=new r;this.addProvider("required",n.required);this.addProvider("length",n.stringLength);this.addProvider("maxlength",n.stringLength);this.addProvider("minlength",n.stringLength);this.addProvider("equalto",n.compare);this.addProvider("range",n.range);this.addProvider("regex",n.regex);this.addProvider("creditcard",n.creditcard);this.addProvider("email",n.email);this.addProvider("url",n.url);this.addProvider("phone",n.phone);this.addProvider("remote",n.remote)},n.prototype.scanMessages=function(){for(var r,t,i=document.querySelectorAll("[data-valmsg-for]"),n=0;n<i.length;n++)r=i[n],t=r.getAttribute("data-valmsg-for"),this.messageFor[t]||(this.messageFor[t]=[]),this.messageFor[t].push(r)},n.prototype.parseDirectives=function(n){for(var i,e,r,f={},t={},o=9,u=0;u<n.length;u++)i=n[u],0===i.name.indexOf("data-val-")&&(r=i.name.substr(o),t[r]=i.value);e=function(n){var e,o;if(-1===n.indexOf("-")){for(var r=Object.keys(t).filter(function(t){return t!==n&&0===t.indexOf(n)}),u={error:t[n],params:{}},s=(n+"-").length,i=0;i<r.length;i++)e=t[r[i]],o=r[i].substr(s),u.params[o]=e;f[n]=u}};for(r in t)e(r);return f},n.prototype.guid4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=16*Math.random()|0;return("x"==n?t:3&t|8).toString(16)})},n.prototype.getElementUID=function(n){var i=this.elementUIDs.filter(function(t){return t.node===n})[0],t;return i?i.uid:(t=this.guid4(),this.elementUIDs.push({node:n,uid:t}),this.elementByUID[t]=n,t)},n.prototype.getFormValidationTask=function(n){var t=this.formInputs[n],r,i,u,f;if(!t||0===t.length)return null;for(r=[],i=0;i<t.length;i++)u=t[i],r.push(this.validators[u]);return f=r.map(function(n){return n()}),Promise.all(f).then(function(n){return n.every(function(n){return n})})},n.prototype.trackFormInput=function(n,t){var r=this,i=this.getElementUID(n),u;(this.formInputs[i]||(this.formInputs[i]=[]),-1===this.formInputs[i].indexOf(t)&&this.formInputs[i].push(t),this.elementEvents[i])||(u=function(t){var u=r.getFormValidationTask(i);u&&(t.preventDefault(),u.then(function(t){t&&n.submit()}).catch(function(n){console.log(n)}))},n.addEventListener("submit",u),n.addEventListener("reset",function(){for(var o,t,u,f,n=0,e=r.formInputs[i];n<e.length;n++){if(o=e[n],t=r.elementByUID[o],t.classList.remove("input-validation-error"),t.classList.remove("input-validation-valid"),u=r.messageFor[t.name],u)for(f=0;f<u.length;f++)u[f].innerHTML="";delete r.summary[o]}r.renderSummary()}),this.elementEvents[i]=u)},n.prototype.addInput=function(n){var r=this,t=this.getElementUID(n),f=this.parseDirectives(n.attributes),e=this.createValidator(n,f),u,i;(this.validators[t]=e,n.form&&this.trackFormInput(n.form,t),this.elementEvents[t])||(i=function(){var n=r.validators[t];clearTimeout(u);u=setTimeout(n,r.debounce)},"select"===n.tagName.toLowerCase()?n.addEventListener("change",i):n.addEventListener("input",i),this.elementEvents[t]=i)},n.prototype.scanInputs=function(){for(var i,t=document.querySelectorAll('[data-val="true"]'),n=0;n<t.length;n++)i=t[n],this.addInput(i)},n.prototype.createSummaryDOM=function(){var n,i,t;if(!Object.keys(this.summary).length)return null;n=document.createElement("ul");for(i in this.summary)t=document.createElement("li"),t.innerHTML=this.summary[i],n.appendChild(t);return n},n.prototype.renderSummary=function(){var i=document.querySelectorAll('[data-valmsg-summary="true"]'),r,u,t,n;if(i.length&&(r=JSON.stringify(this.summary,Object.keys(this.summary).sort()),r!==this.renderedSummaryJSON))for(this.renderedSummaryJSON=r,u=this.createSummaryDOM(),t=0;t<i.length;t++)n=i[t],n.innerHTML="",u?(n.className="validation-summary-errors",n.appendChild(u.cloneNode(!0))):n.className="validation-summary-valid"},n.prototype.addError=function(n,t){var r=this.messageFor[n.name],i,u;if(r)for(i=0;i<r.length;i++)r[i].innerHTML=t,r[i].className="field-validation-error";n.classList.remove("input-validation-valid");n.classList.add("input-validation-error");u=this.getElementUID(n);this.summary[u]=t;this.renderSummary()},n.prototype.removeError=function(n){var i=this.messageFor[n.name],t,r;if(i)for(t=0;t<i.length;t++)i[t].innerHTML="",i[t].className="field-validation-valid";n.classList.remove("input-validation-error");n.classList.add("input-validation-valid");r=this.getElementUID(n);delete this.summary[r];this.renderSummary()},n.prototype.createValidator=function(n,t){var i=this;return function(){return u(i,void 0,void 0,function(){var u,l,e,o,h,a,i,r,s,c;return f(this,function(f){switch(f.label){case 0:for(l in u=[],t)u.push(l);e=0;f.label=1;case 1:return e<u.length?(o=u[e],h=t[o],(a=this.providers[o])?(i=a(n.value,n,h.params),r=!1,s=h.error,"boolean"!=typeof i?[3,2]:(r=i,[3,5])):(console.log("aspnet-validation provider not implemented: "+o),[3,6])):[3,7];case 2:return"string"!=typeof i?[3,3]:(r=!1,s=i,[3,5]);case 3:return[4,i];case 4:"boolean"==typeof(c=f.sent())?r=c:(r=!1,s=c);f.label=5;case 5:if(!r)return this.addError(n,s),[2,!1];f.label=6;case 6:return e++,[3,1];case 7:return this.removeError(n),[2,!0]}})})}},n.prototype.bootstrap=function(){var n=this;this.addMvcProviders();window.addEventListener("load",function(){n.scanMessages();n.scanInputs()})},n}()}])});var v=new aspnetValidation.ValidationService;v.addMvcProviders();v.scanMessages();v.scanInputs();